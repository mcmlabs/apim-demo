{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "apiManagementServiceName": {
      "type": "string"
    }
  },
  "resources": [
    {
      "properties": {
        "path": "conf",
        "value": "{\r\n    \"swagger\": \"2.0\",\r\n    \"info\": {\r\n      \"title\": \"Demo Conference API\",\r\n      \"description\": \"A sample API with information related to a technical conference.  The available resources  include *Speakers*, *Sessions* and *Topics*.  A single write operation is available to provide  feedback on a session.\",\r\n      \"version\": \"2.0.0\"\r\n    },\r\n    \"host\": \"conferenceapi.azurewebsites.net\",\r\n    \"schemes\": [\r\n      \"http\",\r\n      \"https\"\r\n    ],\r\n    \"securityDefinitions\": {\r\n      \"apiKeyHeader\": {\r\n        \"type\": \"apiKey\",\r\n        \"name\": \"Ocp-Apim-Subscription-Key\",\r\n        \"in\": \"header\"\r\n      },\r\n      \"apiKeyQuery\": {\r\n        \"type\": \"apiKey\",\r\n        \"name\": \"subscription-key\",\r\n        \"in\": \"query\"\r\n      }\r\n    },\r\n    \"security\": [\r\n      {\r\n        \"apiKeyHeader\": []\r\n      },\r\n      {\r\n        \"apiKeyQuery\": []\r\n      }\r\n    ],\r\n    \"paths\": {\r\n      \"/sessions\": {\r\n        \"get\": {\r\n          \"description\": \"A list of sessions.  Optional parameters work as filters to reduce the listed sessions.\",\r\n          \"operationId\": \"GetSessions\",\r\n          \"parameters\": [\r\n            {\r\n              \"name\": \"speakername\",\r\n              \"in\": \"query\",\r\n              \"type\": \"string\"\r\n            },\r\n            {\r\n              \"name\": \"dayno\",\r\n              \"in\": \"query\",\r\n              \"description\": \"Format - int32.\",\r\n              \"type\": \"integer\"\r\n            },\r\n            {\r\n              \"name\": \"keyword\",\r\n              \"in\": \"query\",\r\n              \"type\": \"string\"\r\n            }\r\n          ],\r\n          \"responses\": {\r\n            \"200\": {\r\n              \"description\": \"OK\"\r\n            }\r\n          },\r\n          \"produces\": [\r\n            \"application/vnd.collection+json\"\r\n          ]\r\n        }\r\n      },\r\n      \"/session/{id}\": {\r\n        \"get\": {\r\n          \"description\": \"Retreive a representation of a single session by Id\",\r\n          \"operationId\": \"GetSession\",\r\n          \"parameters\": [\r\n            {\r\n              \"$ref\": \"#/parameters/id\"\r\n            }\r\n          ],\r\n          \"responses\": {\r\n            \"200\": {\r\n              \"description\": \"OK\"\r\n            }\r\n          },\r\n          \"produces\": [\r\n            \"application/hal+json\",\r\n            \"text/plain\"\r\n          ]\r\n        }\r\n      },\r\n      \"/session/{id}/topics\": {\r\n        \"get\": {\r\n          \"operationId\": \"GetSessionTopics\",\r\n          \"description\": \"A list of topics covered by a particular session\",\r\n          \"parameters\": [\r\n            {\r\n              \"$ref\": \"#/parameters/id\"\r\n            }\r\n          ],\r\n          \"responses\": {\r\n            \"200\": {\r\n              \"description\": \"OK\"\r\n            }\r\n          },\r\n          \"produces\": [\r\n            \"application/vnd.collection+json\"\r\n          ]\r\n        }\r\n      },\r\n      \"/session/{id}/feedback\": {\r\n        \"post\": {\r\n          \"description\": \"Retreive a representation of a single session by Id\",\r\n          \"operationId\": \"SubmitSession\",\r\n          \"parameters\": [\r\n            {\r\n              \"$ref\": \"#/parameters/id\"\r\n            },\r\n            {\r\n              \"name\": \"body\",\r\n              \"in\": \"body\",\r\n              \"required\": true,\r\n              \"schema\": {\r\n                \"type\": \"string\"\r\n              }\r\n            }\r\n          ],\r\n          \"responses\": {\r\n            \"200\": {\r\n              \"description\": \"OK\"\r\n            }\r\n          },\r\n          \"produces\": [\r\n            \"application/hal+json\",\r\n            \"text/plain\"\r\n          ],\r\n          \"consumes\": [\r\n            \"text/plain\"\r\n          ]\r\n        }\r\n      },\r\n      \"/speakers\": {\r\n        \"get\": {\r\n          \"operationId\": \"GetSpeakers\",\r\n          \"parameters\": [\r\n            {\r\n              \"name\": \"dayno\",\r\n              \"in\": \"query\",\r\n              \"description\": \"Format - int32.\",\r\n              \"type\": \"integer\"\r\n            },\r\n            {\r\n              \"name\": \"speakername\",\r\n              \"in\": \"query\",\r\n              \"type\": \"string\"\r\n            }\r\n          ],\r\n          \"responses\": {\r\n            \"200\": {\r\n              \"description\": \"OK\"\r\n            }\r\n          },\r\n          \"produces\": [\r\n            \"application/vnd.collection+json\"\r\n          ]\r\n        }\r\n      },\r\n      \"/speaker/{id}\": {\r\n        \"get\": {\r\n          \"operationId\": \"GetSpeaker\",\r\n          \"parameters\": [\r\n            {\r\n              \"$ref\": \"#/parameters/id\"\r\n            }\r\n          ],\r\n          \"responses\": {\r\n            \"200\": {\r\n              \"description\": \"OK\"\r\n            }\r\n          },\r\n          \"produces\": [\r\n            \"application/vnd.hal+json\",\r\n            \"text/plain\"\r\n          ]\r\n        }\r\n      },\r\n      \"/speaker/{id}/sessions\": {\r\n        \"get\": {\r\n          \"operationId\": \"GetSpeakerSessions\",\r\n          \"parameters\": [\r\n            {\r\n              \"$ref\": \"#/parameters/id\"\r\n            }\r\n          ],\r\n          \"responses\": {\r\n            \"200\": {\r\n              \"description\": \"OK\"\r\n            }\r\n          },\r\n          \"produces\": [\r\n            \"application/vnd.collection+json\"\r\n          ]\r\n        }\r\n      },\r\n      \"/speaker/{id}/topics\": {\r\n        \"get\": {\r\n          \"operationId\": \"GetSpeakerTopics\",\r\n          \"parameters\": [\r\n            {\r\n              \"$ref\": \"#/parameters/id\"\r\n            }\r\n          ],\r\n          \"responses\": {\r\n            \"200\": {\r\n              \"description\": \"OK\"\r\n            }\r\n          },\r\n          \"produces\": [\r\n            \"application/vnd.collection+json\"\r\n          ]\r\n        }\r\n      },\r\n      \"/topics\": {\r\n        \"get\": {\r\n          \"operationId\": \"GetTopics\",\r\n          \"parameters\": [\r\n            {\r\n              \"name\": \"dayno\",\r\n              \"in\": \"query\",\r\n              \"required\": false,\r\n              \"description\": \"Format - int32.\",\r\n              \"type\": \"integer\"\r\n            }\r\n          ],\r\n          \"responses\": {\r\n            \"200\": {\r\n              \"description\": \"OK\"\r\n            }\r\n          },\r\n          \"produces\": [\r\n            \"application/vnd.collection+json\"\r\n          ]\r\n        }\r\n      },\r\n      \"/topic/{id}\": {\r\n        \"get\": {\r\n          \"operationId\": \"GetTopic\",\r\n          \"parameters\": [\r\n            {\r\n              \"$ref\": \"#/parameters/id\"\r\n            }\r\n          ],\r\n          \"responses\": {\r\n            \"200\": {\r\n              \"description\": \"OK\"\r\n            }\r\n          },\r\n          \"produces\": [\r\n            \"application/hal+json\"\r\n          ]\r\n        }\r\n      },\r\n      \"/topic/{id}/speakers\": {\r\n        \"get\": {\r\n          \"operationId\": \"GetTopicSpeakers\",\r\n          \"parameters\": [\r\n            {\r\n              \"$ref\": \"#/parameters/id\"\r\n            }\r\n          ],\r\n          \"responses\": {\r\n            \"200\": {\r\n              \"description\": \"OK\"\r\n            }\r\n          },\r\n          \"produces\": [\r\n            \"application/vnd.collection+json\"\r\n          ]\r\n        }\r\n      },\r\n      \"/topic/{id}/sessions\": {\r\n        \"get\": {\r\n          \"operationId\": \"GetTopicSessions\",\r\n          \"parameters\": [\r\n            {\r\n              \"$ref\": \"#/parameters/id\"\r\n            }\r\n          ],\r\n          \"responses\": {\r\n            \"200\": {\r\n              \"description\": \"OK\"\r\n            }\r\n          },\r\n          \"produces\": [\r\n            \"application/vnd.collection+json\"\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    \"parameters\": {\r\n      \"id\": {\r\n        \"name\": \"id\",\r\n        \"in\": \"path\",\r\n        \"description\": \"Format - int32.\",\r\n        \"required\": true,\r\n        \"type\": \"integer\"\r\n      }\r\n    }\r\n  }",
        "format": "swagger-json"
      },
      "name": "[concat(parameters('apiManagementServiceName'), '/calendarapi')]",
      "type": "Microsoft.ApiManagement/service/apis",
      "apiVersion": "2019-01-01",
      "dependsOn": []
    }
  ]
}